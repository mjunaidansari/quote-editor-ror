<h2>Two-Factor Authentication Setup</h2>

<% if current_user.otp_enabled %>
  <p>Two-factor authentication is <strong>enabled</strong>.</p>

  <%= form_tag disable_two_factor_auth_index_path do %>
    <label for="otp_attempt">Enter your OTP code to disable 2FA:</label>
    <%= text_field_tag :otp_attempt %>
    <%= submit_tag 'Disable 2FA' %>
  <% end %>

<% else %>
  <p>Scan the QR code below with your authenticator app (Google Authenticator, Authy, etc.).</p>

  <!-- Display the QR code generated by rqrcode -->
  <div>
    <%= raw current_user.generate_qr_code %>
  </div>

  <%= form_tag enable_two_factor_auth_index_path do %>
    <label for="otp_attempt">Enter your OTP code:</label>
    <%= text_field_tag :otp_attempt %>
    <%= submit_tag 'Enable 2FA' %>
  <% end %>
<% end %>
